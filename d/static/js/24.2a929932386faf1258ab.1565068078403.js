webpackJsonp([24],{BNxG:function(e,n,r){var t=r("TqFa");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("3b6a8566",t,!1,{})},IvmR:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t={name:"storeuser_new",props:["attr"],data:function(){var e=function(e,n,r){n!=parseFloat(n)?r(new Error("只能是数字")):n<0?r(new Error("不能为负数")):r()};return{stores:[],selectStore:"",memberCard:{customerId:"",name:"",phone:"",orderAmount:0,bestowAmount:0,source:"",referee:0,amount:0,remark:"",storeUserSelected:[]},storeUser:[],hadSave:!1,rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],orderAmount:[{validator:e,trigger:"blur"}],bestowAmount:[{validator:e,trigger:"blur"}],source:[{required:!0,message:"请选择充值方式",trigger:"blur"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"}]}}},mounted:function(){this.queryUserManageForAll(),this.initMemberCard()},methods:{save:function(){var e=this;this.$refs.memberCard.validate(function(n){if(!n)return!1;e.hadSave=!0;var r=e.$axios.create({headers:{"content-type":"application/x-www-form-urlencoded"}}),t=e.$qs.stringify({name:e.memberCard.name,phone:e.memberCard.phone,orderAmount:e.memberCard.orderAmount,bestowAmount:e.memberCard.bestowAmount,refereeId:e.memberCard.storeUserSelected.join(","),source:e.memberCard.source,customerId:e.memberCard.customerId,remark:e.memberCard.remark});r.post(e.$BASE_USER_URL+"chargeBalance",t).then(function(e){this.$layer.msg(e.data.message),e.data.success&&this.$emit("rechargeClick")}.bind(e))})},queryUserManageForAll:function(){this.$axios.create({}).get(this.$BASE_STORE_URL+"user/queryUserManageForAll",{params:{}}).then(function(e){this.storeUser=e.data.data}.bind(this))},countBalance:function(){this.memberCard.amount=Number(this.memberCard.orderAmount)+Number(this.memberCard.bestowAmount)},amountBalance:function(){var e=this.$BASE_USER_URL+"selectDiscount",n=this;this.$axios.create({}).get(e,{params:{pageNum:1,pageSize:18}}).then(function(e){if(0!=e.data.success){var r=e.data.data.list;n.memberCard.bestowAmount=0,r.length>0&&r.forEach(function(e,r){if(n.memberCard.orderAmount<e.chargeAmount/100)return!1;n.memberCard.bestowAmount=e.bestowAmount/100}),n.memberCard.amount=Number(n.memberCard.orderAmount)+Number(n.memberCard.bestowAmount)}}.bind(this)).catch(function(e){alert("getAllTypeAxios ERROE ! "+e)})},initMemberCard:function(){this.attr.storeRecordRealName;null!=this.attr.storeRecordRealName&&""!=this.attr.storeRecordRealName?this.memberCard.name=this.attr.storeRecordRealName:null!=this.attr.realName&&""!=this.attr.realName?this.memberCard.name=this.attr.realName:null!=this.attr.nickname&&""!=this.attr.nickname?this.memberCard.name=this.attr.nickname:this.memberCard.name="",this.memberCard.phone=this.attr.phone,this.memberCard.customerId=this.attr.id}}},a=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("div",{attrs:{id:"updatePi"}},[r("el-form",{ref:"memberCard",attrs:{model:e.memberCard,rules:e.rules,"label-width":"100px"}},[r("div",{staticStyle:{"margin-bottom":"5px"}},[r("div",{staticClass:"fixed-table-container bootstrap-table"},[r("table",{staticClass:"table table-hover"},[r("tbody",[r("tr",[r("td",[r("el-form-item",{attrs:{label:"用户名:",prop:"name"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入用户名",required:"",disabled:!0},model:{value:e.memberCard.name,callback:function(n){e.$set(e.memberCard,"name",n)},expression:"memberCard.name"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"电话号码:",prop:"phone"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 电话号码",disabled:!0},model:{value:e.memberCard.phone,callback:function(n){e.$set(e.memberCard,"phone",n)},expression:"memberCard.phone"}})],1)])],1)]),e._v(" "),r("tr",[r("td",[r("el-form-item",{attrs:{label:"充值:",prop:"orderAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 充值金额"},on:{blur:e.amountBalance},model:{value:e.memberCard.orderAmount,callback:function(n){e.$set(e.memberCard,"orderAmount",n)},expression:"memberCard.orderAmount"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"送:",prop:"bestowAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 赠送金额"},on:{blur:e.countBalance},model:{value:e.memberCard.bestowAmount,callback:function(n){e.$set(e.memberCard,"bestowAmount",n)},expression:"memberCard.bestowAmount"}})],1)])],1)]),e._v(" "),r("tr",[r("td",[r("el-form-item",{attrs:{label:"推荐人:",prop:"referee"}},[r("span",[r("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择 推荐人"},model:{value:e.memberCard.storeUserSelected,callback:function(n){e.$set(e.memberCard,"storeUserSelected",n)},expression:"memberCard.storeUserSelected"}},e._l(e.storeUser,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"充值方式:",prop:"source"}},[r("span",[r("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 充值方式"},model:{value:e.memberCard.source,callback:function(n){e.$set(e.memberCard,"source",n)},expression:"memberCard.source"}},[r("el-option",{attrs:{label:"pos机",value:"5"}}),e._v(" "),r("el-option",{attrs:{label:"大众点评",value:"7"}}),e._v(" "),r("el-option",{attrs:{label:"现金",value:"6"}}),e._v(" "),r("el-option",{attrs:{label:"微信",value:"8"}})],1)],1)])],1)]),e._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[r("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 备注"},model:{value:e.memberCard.remark,callback:function(n){e.$set(e.memberCard,"remark",n)},expression:"memberCard.remark"}})],1)])],1)]),e._v(" "),r("tr",[r("td"),r("td"),r("td"),r("td")])])])])])])],1),e._v(" "),r("div",{staticStyle:{margin:"10px auto"}},[r("div",{staticStyle:{margin:"0 auto",width:"20%"}},[r("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.save}},[e._v("保存")])],1)])])};a._withStripped=!0;var o={render:a,staticRenderFns:[]},m=o;var s=!1;var l=r("VU/8")(t,m,!1,function(e){s||r("BNxG")},"data-v-dcb6ee5a",null);l.options.__file="src\\components\\member\\member_card_recharge.vue";n.default=l.exports},TqFa:function(e,n,r){(e.exports=r("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"member_card_recharge.vue",sourceRoot:""}])}});
//# sourceMappingURL=24.2a929932386faf1258ab.1565068078403.js.map