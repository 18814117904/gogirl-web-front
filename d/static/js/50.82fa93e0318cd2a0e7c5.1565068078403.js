webpackJsonp([50],{IZFu:function(e,n,s){(e.exports=s("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"sku_new.vue",sourceRoot:""}])},inUt:function(e,n,s){var a=s("IZFu");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("85ce6b1a",a,!1,{})},mYLG:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={components:{uploader:s("Y69P").default},name:"sku_new",data:function(){return{skuTypes:[],purchasSku:{id:"",sku:"",picturePath:"",skuType:"",useType:"1",skuName:"",skuTypeName:"",skuModel:"",shopPrice:0,purchasePrice:0,supplier:""},hadSave:!1,picArr:[],addVisible:!1,rules:{sku:[{required:!0,message:"请输入sku",trigger:"blur"}],skuModel:[{required:!0,message:"请输入型号",trigger:"blur"}],skuName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],skuType:[{required:!0,message:"请输入类型",trigger:"blur"}],shopPrice:[{required:!0,message:"请输入门店单价",trigger:"blur"}],purchasePrice:[{required:!0,message:"请输入采购单价",trigger:"blur"}],supplier:[{required:!0,message:"请输入供应商",trigger:"blur"}],useType:[{required:!0,message:"请选择标签",trigger:"blur"}]}}},mounted:function(){this.reChooseType()},methods:{childByValue:function(e){this.picArr=e},enter:function(e){13==e.keyCode&&this.save()},save:function(){var e=this;this.$refs.purchasSku.validate(function(n){if(!n)return!1;if(e.hadSave=!0,""==e.picArr||null==e.picArr)return e.$message.error("你还没有添加sku图片"),e.hadSave=!1,!1;var s=new FormData;e.picArr.forEach(function(e){s.append("picData",e.file)}),s.append("sku",e.purchasSku.sku),s.append("skuType",e.purchasSku.skuType),s.append("skuModel",e.purchasSku.skuModel),s.append("skuName",e.purchasSku.skuName),s.append("shopPrice",e.purchasSku.shopPrice),s.append("purchasePrice",e.purchasSku.purchasePrice),s.append("supplier",e.purchasSku.supplier),s.append("useType",e.purchasSku.useType);var a=new XMLHttpRequest,t=e;a.open("post",t.$BASE_PURCHASE_URL+"sku/insert",!0),a.withCredentials=!0,a.crossDomain=!0,a.send(s),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);1==e.success?(t.$layer.msg("提交成功！"),t.hadSave=!0,t.$emit("addChildClick")):(t.$layer.msg("提交失败！ "+e.message),t.hadSave=!1,t.$emit("addChildClick"))}}})},reChooseType:function(){this.$axios.create({}).get(this.$BASE_PURCHASE_URL+"skuType/select",{params:{pageNum:1,pageSize:10}}).then(function(e){this.skuTypes=e.data.data.list}.bind(this))}}},t=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",{on:{keydown:function(n){e.enter(n)}}},[s("div",{attrs:{id:"updatePi"}},[s("el-form",{ref:"purchasSku",attrs:{model:e.purchasSku,rules:e.rules,"label-width":"100px"}},[s("div",{staticStyle:{"margin-bottom":"5px"}},[s("div",{staticClass:"fixed-table-container bootstrap-table"},[s("table",{staticClass:"table table-hover"},[s("tbody",[s("tr",[s("td",[s("el-form-item",{attrs:{label:"sku:",prop:"sku"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 sku",required:""},model:{value:e.purchasSku.sku,callback:function(n){e.$set(e.purchasSku,"sku",n)},expression:"purchasSku.sku"}})],1)])],1),e._v(" "),s("td",[s("el-form-item",{attrs:{label:"型号:",prop:"skuModel"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 型号"},model:{value:e.purchasSku.skuModel,callback:function(n){e.$set(e.purchasSku,"skuModel",n)},expression:"purchasSku.skuModel"}})],1)])],1)]),e._v(" "),s("tr",[s("td",[s("el-form-item",{attrs:{label:"门店单价:",prop:"shopPrice"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 门店单价",required:""},model:{value:e.purchasSku.shopPrice,callback:function(n){e.$set(e.purchasSku,"shopPrice",n)},expression:"purchasSku.shopPrice"}})],1)])],1),e._v(" "),s("td",[s("el-form-item",{attrs:{label:"采购单价:",prop:"purchasePrice"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 采购单价"},model:{value:e.purchasSku.purchasePrice,callback:function(n){e.$set(e.purchasSku,"purchasePrice",n)},expression:"purchasSku.purchasePrice"}})],1)])],1)]),e._v(" "),s("tr",[s("td",[s("el-form-item",{attrs:{label:"标签:",prop:"useType"}},[s("span",[s("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 标签"},model:{value:e.purchasSku.useType,callback:function(n){e.$set(e.purchasSku,"useType",n)},expression:"purchasSku.useType"}},[s("el-option",{attrs:{label:"店用产品",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"售卖商品",value:"2"}})],1)],1)])],1),e._v(" "),s("td",[s("el-form-item",{attrs:{label:"类型:",prop:"skuType"}},[s("span",[s("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 类型"},on:{change:e.reChooseType},model:{value:e.purchasSku.skuType,callback:function(n){e.$set(e.purchasSku,"skuType",n)},expression:"purchasSku.skuType"}},e._l(e.skuTypes,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1)]),e._v(" "),s("tr",[s("td",[s("el-form-item",{attrs:{label:"产品名称:",prop:"skuName"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 产品名称"},model:{value:e.purchasSku.skuName,callback:function(n){e.$set(e.purchasSku,"skuName",n)},expression:"purchasSku.skuName"}})],1)])],1),e._v(" "),s("td",[s("el-form-item",{attrs:{label:"供应商:",prop:"supplier"}},[s("span",[s("el-input",{staticStyle:{"max-width":"100%"},attrs:{type:"textarea",placeholder:"请输入 供应商",autosize:{minRows:2,maxRows:4},required:""},model:{value:e.purchasSku.supplier,callback:function(n){e.$set(e.purchasSku,"supplier",n)},expression:"purchasSku.supplier"}})],1)])],1)]),e._v(" "),s("tr",[s("td",{attrs:{colspan:"4"}},[s("span",{staticStyle:{color:"red"}},[e._v("图片：")])])]),e._v(" "),s("tr",[s("td",{attrs:{colspan:"4"}},[s("span",[s("uploader",{on:{childByValue:e.childByValue}})],1)])]),e._v(" "),s("tr",[s("td"),s("td"),s("td"),s("td")])])])])])])],1),e._v(" "),s("div",{staticStyle:{margin:"10px auto"}},[s("div",{staticStyle:{margin:"0 auto",width:"20%"}},[s("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.save}},[e._v("保存")])],1)])])};t._withStripped=!0;var r={render:t,staticRenderFns:[]},u=r;var p=!1;var i=s("VU/8")(a,u,!1,function(e){p||s("inUt")},"data-v-2dceb07f",null);i.options.__file="src\\components\\sku\\sku_new.vue";n.default=i.exports}});
//# sourceMappingURL=50.82fa93e0318cd2a0e7c5.1565068078403.js.map