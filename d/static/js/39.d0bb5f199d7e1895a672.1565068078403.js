webpackJsonp([39],{"1jEG":function(e,t,n){var s=n("l8VF");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("rjj0")("4e3fe8c0",s,!1,{})},akQd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-form",{ref:"user",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("div",{staticClass:"fixed-table-container bootstrap-table"},[n("h3",{staticStyle:{"margin-top":"20px"}},[e._v("修改帐号")]),e._v(" "),n("table",{staticClass:"table table-hover"},[n("tbody",[n("tr",[n("td",[n("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[n("span",[n("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 姓名",required:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)])],1),e._v(" "),n("td",[n("el-form-item",{attrs:{label:"密码:",prop:"password"}},[n("span",[n("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 密码",type:e.passwordType,required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)])],1)]),e._v(" "),n("tr",[n("td",[n("el-form-item",{attrs:{label:"所属店铺:",prop:"selectStore"}},[n("span",[n("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 所属店铺"},on:{change:e.reChooseStore},model:{value:e.user.selectStore,callback:function(t){e.$set(e.user,"selectStore",t)},expression:"user.selectStore"}},[n("el-option",{attrs:{label:"总后台",value:0}}),e._v(" "),e._l(e.stores,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1)])],1),e._v(" "),n("td",[e.cmsType?n("el-form-item",{attrs:{label:"用户角色:",prop:"selectCmsRole"}},[n("span",[n("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 用户角色"},model:{value:e.user.selectCmsRole,callback:function(t){e.$set(e.user,"selectCmsRole",t)},expression:"user.selectCmsRole"}},[n("el-option",{attrs:{label:"运营",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"客服",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"采购",value:"3"}}),e._v(" "),n("el-option",{attrs:{label:"官网",value:"6"}})],1)],1)]):e._e(),e._v(" "),e.storeType?n("el-form-item",{attrs:{label:"用户角色:",prop:"selectStoreRole"}},[n("span",[n("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 用户角色"},model:{value:e.user.selectStoreRole,callback:function(t){e.$set(e.user,"selectStoreRole",t)},expression:"user.selectStoreRole"}},[n("el-option",{attrs:{label:"老板",value:"4"}}),e._v(" "),n("el-option",{attrs:{label:"员工",value:"5"}})],1)],1)]):e._e()],1)]),e._v(" "),n("tr",[n("td",[n("el-form-item",{attrs:{label:"电话:",prop:"telphone"}},[n("span",[n("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 电话",required:""},model:{value:e.user.telphone,callback:function(t){e.$set(e.user,"telphone",t)},expression:"user.telphone"}})],1)])],1)]),e._v(" "),n("tr",[n("td"),n("td"),n("td"),n("td")])])])])])])],1),e._v(" "),n("div",{staticStyle:{margin:"10px auto"}},[n("div",{staticStyle:{margin:"0 auto",width:"20%"}},[n("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.modify}},[e._v("修改")])],1)])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]},a=r;var l=!1;var o=n("VU/8")({name:"user_modify",props:["attr"],data:function(){return{stores:[],user:{name:"",password:"",selectCmsRole:"",selectStoreRole:"",telphone:"",selectStore:"",sex:""},cmsType:!0,storeType:!1,userId:this.$parent.nodetail,rules:{name:[{required:!0,message:"请输入帐号名称",trigger:"blur"}],password:[{required:!0,message:"请输入帐号密码",trigger:"blur"}],selectStore:[{required:!0,message:"请选择所属店铺",trigger:"blur"}],selectCmsRole:[{required:!0,message:"请选择所属店铺",trigger:"blur"}],selectStoreRole:[{required:!0,message:"请选择所属店铺",trigger:"blur"}]},hadSave:!1,passwordType:"password"}},mounted:function(){this.getUserDetail(),this.reChooseStore()},methods:{modify:function(){var e=this;this.$refs.user.validate(function(t){if(!t)return!1;e.hadSave=!0;var n=e.$BASE_URL+"user/modifyUser/",s=e.$axios.create({}),r=e.$qs.stringify({id:e.attr,name:e.user.name,departmentId:e.user.selectStore,password:e.user.password,telphone:e.user.telphone,userRole:e.user.selectCmsRole||e.user.selectStoreRole,sex:e.user.sex});s.post(n,r).then(function(e){this.$layer.msg(e.data.message),1==e.data.success&&(this.hadSave=!0),this.$emit("updateClick")}.bind(e))})},getUserDetail:function(){this.$axios.create({}).get(this.$BASE_URL+"user/queryUserForDetail",{params:{id:this.attr}}).then(function(e){this.user=e.data.data,this.user.selectStore=e.data.data.departmentId,0!=this.user.selectStore?(this.cmsType=!1,this.storeType=!0,this.user.selectStoreRole=e.data.data.userRole+""):(this.cmsType=!0,this.storeType=!1,this.user.selectCmsRole=e.data.data.userRole+"")}.bind(this))},reChooseStore:function(){this.$axios.create({}).get(this.$BASE_STORE_URL+"shop/queryShopForAll",{params:{}}).then(function(e){this.stores=e.data.data}.bind(this)),0==this.user.selectStore?(this.cmsType=!0,this.storeType=!1,this.user.selectCmsRole="",this.user.selectStoreRole=""):(this.cmsType=!1,this.storeType=!0,this.user.selectCmsRole="",this.user.selectStoreRole="")}}},a,!1,function(e){l||n("1jEG")},"data-v-6037208d",null);o.options.__file="src\\components\\user\\user_modify.vue";t.default=o.exports},l8VF:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"user_modify.vue",sourceRoot:""}])}});
//# sourceMappingURL=39.d0bb5f199d7e1895a672.1565068078403.js.map