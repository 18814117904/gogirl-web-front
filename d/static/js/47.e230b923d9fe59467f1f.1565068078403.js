webpackJsonp([47],{"4I94":function(n,e,o){(n.exports=o("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"coupon_grant.vue",sourceRoot:""}])},QtXC:function(n,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={components:{},name:"storeuser_new",data:function(){return{couponAll:[],coupon:{phone:"",amount:"",issueType:"1",groupType:[],couponId:""},hadSave:!1,phoneShow:!0,groupShow:!1,rules:{phone:[{required:!0,message:"请输入券名称",trigger:"blur"}],amount:[{required:!0,message:"请输入 数量"}],issueType:[{required:!0,message:"请选择发放类型",trigger:"blur"}],couponId:[{required:!0,message:"请选择 券"}],groupType:[{required:!0,message:"请至少选择一种类型"}]}}},mounted:function(){this.getAllcoupon()},methods:{getAllcoupon:function(){var n=this.$BASE_USER_URL+"getAllCoupon";this.$axios.create({}).get(n,{params:{}}).then(function(n){this.couponAll=n.data.data}.bind(this)).catch(function(n){alert("getAllCompanyAxios ERROE ! "+n)})},save:function(){var n=this;this.$refs.coupon.validate(function(e){if(!e)return!1;n.hadSave=!0;var o=n.$axios.create({headers:{"content-type":"application/x-www-form-urlencoded"}}),t=n.$qs.stringify({phone:n.coupon.phone,amount:n.coupon.amount,groupType:n.coupon.groupType.join(","),issueType:n.coupon.issueType,couponId:n.coupon.couponId});o.post(n.$BASE_USER_URL+"sendCoupons",t).then(function(n){this.$layer.msg(n.data.message),this.$emit("grantClick")}.bind(n))})},getCouponSelected:function(){2==this.coupon.issueType?(this.groupShow=!0,this.phoneShow=!1):1==this.coupon.issueType&&(this.groupShow=!1,this.phoneShow=!0)}}},a=function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("div",[o("div",{attrs:{id:"updatePi"}},[o("el-form",{ref:"coupon",attrs:{model:n.coupon,rules:n.rules,"label-width":"100px"}},[o("div",{staticStyle:{"margin-bottom":"5px"}},[o("div",{staticClass:"fixed-table-container bootstrap-table"},[o("table",{staticClass:"table table-hover"},[o("tbody",[o("tr",[o("td",[o("el-form-item",{ref:"grantTypeSelect",attrs:{label:"发放类型:",prop:"issueType"}},[o("span",[o("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 发放类型"},on:{change:n.getCouponSelected},model:{value:n.coupon.issueType,callback:function(e){n.$set(n.coupon,"issueType",e)},expression:"coupon.issueType"}},[o("el-option",{attrs:{label:"单个用户",value:"1"}}),n._v(" "),o("el-option",{attrs:{label:"群发用户",value:"2"}})],1)],1)])],1),n._v(" "),o("td",[n.phoneShow?o("div",{ref:"validPhoneSelect"},[o("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[o("span",[o("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入手机号码",required:""},model:{value:n.coupon.phone,callback:function(e){n.$set(n.coupon,"phone",e)},expression:"coupon.phone"}})],1)])],1):n._e(),n._v(" "),n.groupShow?o("div",{ref:"groupSending"},[o("el-form-item",{attrs:{label:"群发类型:",prop:"groupType"}},[o("span",[o("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择 券类型"},model:{value:n.coupon.groupType,callback:function(e){n.$set(n.coupon,"groupType",e)},expression:"coupon.groupType"}},[o("el-option",{attrs:{label:"注册用户",value:"1"}}),n._v(" "),o("el-option",{attrs:{label:"订单用户",value:"2"}}),n._v(" "),o("el-option",{attrs:{label:"次订单用户",value:"3"}}),n._v(" "),o("el-option",{attrs:{label:"会员卡用户",value:"4"}})],1)],1)])],1):n._e()])]),n._v(" "),o("tr",[o("td",[o("el-form-item",{attrs:{label:"券选择:",prop:"couponId"}},[o("span",[o("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 券类型"},model:{value:n.coupon.couponId,callback:function(e){n.$set(n.coupon,"couponId",e)},expression:"coupon.couponId"}},n._l(n.couponAll,function(n){return o("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})}))],1)])],1),n._v(" "),o("td",[o("el-form-item",{attrs:{label:"数量:",prop:"amount"}},[o("span",[o("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 数量"},model:{value:n.coupon.amount,callback:function(e){n.$set(n.coupon,"amount",e)},expression:"coupon.amount"}})],1)])],1)]),n._v(" "),o("tr",[o("td"),o("td"),o("td"),o("td")])])])])])])],1),n._v(" "),o("div",{staticStyle:{margin:"10px auto"}},[o("div",{staticStyle:{margin:"0 auto",width:"20%"}},[o("el-button",{attrs:{type:"primary",plain:"",disabled:n.hadSave},on:{click:n.save}},[n._v("发放")])],1)])])};a._withStripped=!0;var l={render:a,staticRenderFns:[]},p=l;var s=!1;var i=o("VU/8")(t,p,!1,function(n){s||o("fx40")},"data-v-411a010e",null);i.options.__file="src\\components\\coupon\\coupon_grant.vue";e.default=i.exports},fx40:function(n,e,o){var t=o("4I94");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);o("rjj0")("63c5c2de",t,!1,{})}});
//# sourceMappingURL=47.e230b923d9fe59467f1f.1565068078403.js.map