webpackJsonp([51],{KsVq:function(n,t,e){var a=e("cgEI");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("328ba44e",a,!1,{})},NZle:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{uploader:e("ofQP").default},name:"storeuser_new",props:["attr"],data:function(){return{coupon:{name:"",discountAmount:"",limitQuantity:"",allQuantity:"",validType:"1",validDate:"",validStartTime:"",validEndTime:"",condition:"",type:"",note:"",reachingAmount:""},reachingAmountShow:!1,hadSave:!1,rules:{name:[{required:!0,message:"请输入券名称",trigger:"blur"}],discountAmount:[{required:!0,message:"请输入 金额"}],limitQuantity:[{required:!0,message:"请输入 限领数"}],allQuantity:[{required:!0,message:"请输入 发放量"}],condition1:[{required:!0,message:"请选择使用条件",trigger:"blur"}],type:[{required:!0,message:"请选择分类",trigger:"blur"}],validType:[{required:!0,message:"请选择有效期类型",trigger:"blur"}]}}},mounted:function(){this.getCouponDetail()},methods:{getCouponDetail:function(){this.$axios.create({}).get(this.$BASE_USER_URL+"selectCouponByPrimaryKey",{params:{id:this.attr}}).then(function(n){this.coupon=n.data.data,this.coupon.type=n.data.data.type.toString(),this.coupon.validType=n.data.data.validType.toString(),1==n.data.data.validType?(this.$refs.startAndEndTime.style.display="block",this.$refs.validDateSelect.style.display="none"):2==n.data.data.validType&&(this.$refs.startAndEndTime.style.display="none",this.$refs.validDateSelect.style.display="block"),this.reachingAmountShow=3==n.data.data.type}.bind(this))},save:function(){var n=this;this.$refs.coupon.validate(function(t){if(!t)return!1;n.hadSave=!0;var e=n.$axios.create({headers:{"content-type":"application/x-www-form-urlencoded"}}),a=n.$qs.stringify({id:n.attr,name:n.coupon.name,discountAmount:n.coupon.discountAmount,limitQuantity:n.coupon.limitQuantity,allQuantity:n.coupon.allQuantity,validStartTime:n.coupon.validStartTime,validEndTime:n.coupon.validEndTime,condition1:n.coupon.condition1,validDate:n.coupon.validDate,type:n.coupon.type,note:n.coupon.note});e.post(n.$BASE_USER_URL+"updateCoupon",a).then(function(n){this.$layer.msg(n.data.message),this.$emit("updateClick")}.bind(n))})},getCouponSelected:function(){1==this.coupon.validType?(this.$refs.startAndEndTime.style.display="block",this.$refs.validDateSelect.style.display="none"):2==this.coupon.validType&&(this.$refs.startAndEndTime.style.display="none",this.$refs.validDateSelect.style.display="block")}}},o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("div",{attrs:{id:"updatePi"}},[e("el-form",{ref:"coupon",attrs:{model:n.coupon,rules:n.rules,"label-width":"100px"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("div",{staticClass:"fixed-table-container bootstrap-table"},[e("table",{staticClass:"table table-hover"},[e("tbody",[e("tr",[e("td",[e("el-form-item",{attrs:{label:"券名称:",prop:"name"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入券名称",required:""},model:{value:n.coupon.name,callback:function(t){n.$set(n.coupon,"name",t)},expression:"coupon.name"}})],1)])],1),n._v(" "),e("td",[e("el-form-item",{attrs:{label:"金额:",prop:"discountAmount"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 金额",disabled:"disabled"},model:{value:n.coupon.discountAmount,callback:function(t){n.$set(n.coupon,"discountAmount",t)},expression:"coupon.discountAmount"}})],1)])],1)]),n._v(" "),e("tr",[e("td",[e("el-form-item",{attrs:{label:"限领:",prop:"limitQuantity"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入限领",required:""},model:{value:n.coupon.limitQuantity,callback:function(t){n.$set(n.coupon,"limitQuantity",t)},expression:"coupon.limitQuantity"}})],1)])],1),n._v(" "),e("td",[e("el-form-item",{attrs:{label:"总放量:",prop:"allQuantity"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 总放量",required:""},model:{value:n.coupon.allQuantity,callback:function(t){n.$set(n.coupon,"allQuantity",t)},expression:"coupon.allQuantity"}})],1)])],1)]),n._v(" "),e("tr",[e("td",[e("el-form-item",{ref:"validTypeSelect",attrs:{label:"有效期类型:",prop:"validType"}},[e("span",[e("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 有效期类型"},on:{change:n.getCouponSelected},model:{value:n.coupon.validType,callback:function(t){n.$set(n.coupon,"validType",t)},expression:"coupon.validType"}},[e("el-option",{attrs:{label:"开始和结束",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"有效天数",value:"2"}})],1)],1)])],1),n._v(" "),e("td",[e("div",{ref:"startAndEndTime",staticStyle:{display:"block"}},[e("el-form-item",{attrs:{label:"开始时间:",prop:"validStartTime"}},[e("span",[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始日期时间"},model:{value:n.coupon.validStartTime,callback:function(t){n.$set(n.coupon,"validStartTime",t)},expression:"coupon.validStartTime"}})],1)]),n._v(" "),e("el-form-item",{attrs:{label:"结束时间:",prop:"validEndTime"}},[e("span",[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束日期时间"},model:{value:n.coupon.validEndTime,callback:function(t){n.$set(n.coupon,"validEndTime",t)},expression:"coupon.validEndTime"}})],1)])],1),n._v(" "),e("div",{ref:"validDateSelect",staticStyle:{display:"none"}},[e("el-form-item",{attrs:{label:"有效天数:",prop:"validDate"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 有效天数",required:""},model:{value:n.coupon.validDate,callback:function(t){n.$set(n.coupon,"validDate",t)},expression:"coupon.validDate"}})],1)])],1)])]),n._v(" "),e("tr",[e("td",[e("el-form-item",{attrs:{label:"券作用:",prop:"note"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 券作用",required:""},model:{value:n.coupon.note,callback:function(t){n.$set(n.coupon,"note",t)},expression:"coupon.note"}})],1)])],1),n._v(" "),e("td",[e("el-form-item",{attrs:{label:"种类:",prop:"type"}},[e("span",[e("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 种类",disabled:"disabled"},model:{value:n.coupon.type,callback:function(t){n.$set(n.coupon,"type",t)},expression:"coupon.type"}},[e("el-option",{attrs:{label:"现金抵用券",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"免单券",value:"2"}}),n._v(" "),e("el-option",{attrs:{label:"减免券",value:"3"}})],1)],1)])],1)]),n._v(" "),e("tr",[e("td",[n.reachingAmountShow?e("el-form-item",{attrs:{label:"满减金额:",prop:"reachingAmount"}},[e("span",[e("el-input",{staticStyle:{"max-width":"100%"},attrs:{disabled:"disabled",placeholder:"请输入 满减金额"},model:{value:n.coupon.reachingAmount,callback:function(t){n.$set(n.coupon,"reachingAmount",t)},expression:"coupon.reachingAmount"}})],1)]):n._e()],1),n._v(" "),e("td")]),n._v(" "),e("tr",[e("td"),e("td"),e("td"),e("td")])])])])])])],1),n._v(" "),e("div",{staticStyle:{margin:"10px auto"}},[e("div",{staticStyle:{margin:"0 auto",width:"20%"}},[e("el-button",{attrs:{type:"primary",plain:"",disabled:n.hadSave},on:{click:n.save}},[n._v("保存")])],1)])])};o._withStripped=!0;var i={render:o,staticRenderFns:[]},l=i;var s=!1;var r=e("VU/8")(a,l,!1,function(n){s||e("KsVq")},"data-v-2718fd2d",null);r.options.__file="src\\components\\coupon\\coupon_modify.vue";t.default=r.exports},cgEI:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"coupon_modify.vue",sourceRoot:""}])}});
//# sourceMappingURL=51.0e9085b877b0624f225f.1565068078403.js.map