webpackJsonp([32],{"1adO":function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r("bOdI"),a=r.n(t),o={name:"storeuser_new",data:function(){var e,n=function(e,n,r){n!=parseFloat(n)?r(new Error("只能是数字")):n<0?r(new Error("不能为负数")):r()};return{stores:[],selectStore:"",memberCard:{name:"",phone:"",orderAmount:0,bestowAmount:0,source:"",referee:0,amount:0,remark:"",storeUserSelected:[]},storeUser:[],hadSave:!1,rules:(e={name:[{required:!0,message:"请输入用户名",trigger:"blur"}],amount:[{validator:n,trigger:"blur"}],orderAmount:[{validator:n,trigger:"blur"}],bestowAmount:[{validator:n,trigger:"blur"}]},a()(e,"amount",[{validator:n,trigger:"blur"}]),a()(e,"source",[{required:!0,message:"请选择充值方式",trigger:"blur"}]),a()(e,"phone",[{required:!0,message:"请输入电话号码",trigger:"blur"}]),e)}},mounted:function(){this.queryUserManageForAll()},methods:{save:function(){var e=this;this.$refs.memberCard.validate(function(n){if(!n)return!1;e.hadSave=!0;var r=e.$axios.create({headers:{"content-type":"application/x-www-form-urlencoded"}}),t=e.$qs.stringify({name:e.memberCard.name,phone:e.memberCard.phone,amount:e.memberCard.amount,orderAmount:e.memberCard.orderAmount,bestowAmount:e.memberCard.bestowAmount,refereeId:e.memberCard.storeUserSelected.join(","),source:e.memberCard.source,remark:e.memberCard.remark});r.post(e.$BASE_USER_URL+"newCustomerCard",t).then(function(e){this.$layer.msg(e.data.message),e.data.success&&this.$emit("childClick")}.bind(e))})},queryUserManageForAll:function(){this.$axios.create({}).get(this.$BASE_STORE_URL+"user/queryUserManageForAll",{params:{}}).then(function(e){this.storeUser=e.data.data}.bind(this))},countBalance:function(){this.memberCard.amount=Number(this.memberCard.orderAmount)+Number(this.memberCard.bestowAmount)},amountBalance:function(){var e=this.$BASE_USER_URL+"selectDiscount",n=this;this.$axios.create({}).get(e,{params:{pageNum:1,pageSize:18}}).then(function(e){if(0!=e.data.success){var r=e.data.data.list;n.memberCard.bestowAmount=0,r.length>0&&r.forEach(function(e,r){if(n.memberCard.orderAmount<e.chargeAmount/100)return!1;n.memberCard.bestowAmount=e.bestowAmount/100}),n.memberCard.amount=Number(n.memberCard.orderAmount)+Number(n.memberCard.bestowAmount)}}.bind(this)).catch(function(e){alert("getAllTypeAxios ERROE ! "+e)})}}},m=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("div",{attrs:{id:"updatePi"}},[r("el-form",{ref:"memberCard",attrs:{model:e.memberCard,rules:e.rules,"label-width":"100px"}},[r("div",{staticStyle:{"margin-bottom":"5px"}},[r("div",{staticClass:"fixed-table-container bootstrap-table"},[r("table",{staticClass:"table table-hover"},[r("tbody",[r("tr",[r("td",[r("el-form-item",{attrs:{label:"用户名:",prop:"name"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入用户名",required:""},model:{value:e.memberCard.name,callback:function(n){e.$set(e.memberCard,"name",n)},expression:"memberCard.name"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"电话号码:",prop:"phone"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 电话号码"},model:{value:e.memberCard.phone,callback:function(n){e.$set(e.memberCard,"phone",n)},expression:"memberCard.phone"}})],1)])],1)]),e._v(" "),r("tr",[r("td",[r("el-form-item",{attrs:{label:"充值:",prop:"orderAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 充值金额"},on:{blur:e.amountBalance},model:{value:e.memberCard.orderAmount,callback:function(n){e.$set(e.memberCard,"orderAmount",n)},expression:"memberCard.orderAmount"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"送:",prop:"bestowAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 赠送金额"},on:{blur:e.countBalance},model:{value:e.memberCard.bestowAmount,callback:function(n){e.$set(e.memberCard,"bestowAmount",n)},expression:"memberCard.bestowAmount"}})],1)])],1)]),e._v(" "),r("tr",[r("td",[r("el-form-item",{attrs:{label:"余额:",prop:"amount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 余额"},model:{value:e.memberCard.amount,callback:function(n){e.$set(e.memberCard,"amount",n)},expression:"memberCard.amount"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"充值方式:",prop:"source"}},[r("span",[r("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 充值方式"},model:{value:e.memberCard.source,callback:function(n){e.$set(e.memberCard,"source",n)},expression:"memberCard.source"}},[r("el-option",{attrs:{label:"pos机",value:"5"}}),e._v(" "),r("el-option",{attrs:{label:"大众点评",value:"7"}}),e._v(" "),r("el-option",{attrs:{label:"现金",value:"6"}}),e._v(" "),r("el-option",{attrs:{label:"微信",value:"8"}})],1)],1)])],1)]),e._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[r("el-form-item",{attrs:{label:"推荐人:",prop:"referee"}},[r("span",[r("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择 推荐人"},model:{value:e.memberCard.storeUserSelected,callback:function(n){e.$set(e.memberCard,"storeUserSelected",n)},expression:"memberCard.storeUserSelected"}},e._l(e.storeUser,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1)]),e._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[r("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 备注"},model:{value:e.memberCard.remark,callback:function(n){e.$set(e.memberCard,"remark",n)},expression:"memberCard.remark"}})],1)])],1)]),e._v(" "),r("tr",[r("td"),r("td"),r("td"),r("td")])])])])])])],1),e._v(" "),r("div",{staticStyle:{margin:"10px auto"}},[r("div",{staticStyle:{margin:"0 auto",width:"20%"}},[r("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.save}},[e._v("保存")])],1)])])};m._withStripped=!0;var s={render:m,staticRenderFns:[]},l=s;var i=!1;var d=r("VU/8")(o,l,!1,function(e){i||r("uBkQ")},"data-v-7a58eca4",null);d.options.__file="src\\components\\member\\member_card_new.vue";n.default=d.exports},K7EB:function(e,n,r){(e.exports=r("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"member_card_new.vue",sourceRoot:""}])},uBkQ:function(e,n,r){var t=r("K7EB");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("7a27eb75",t,!1,{})}});
//# sourceMappingURL=32.b28b429a9ffc8c9b36b7.1565145539402.js.map