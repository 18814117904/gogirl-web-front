webpackJsonp([37],{a4Jg:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("mvHQ"),r=t.n(a),s=t("d2gY"),i=(t("NYxO"),t("pkNH")),o=t("N0i6"),d=t("yclV"),l=t("SZY9"),c={components:{BaseNav:i.default,ChargeMoney:o.default},data:function(){return{ORDER_TYPR_STATUS:l.c,ORDER_TYPE:l.b,stores:[],storeSelected:"",form:{birthdayName:""},orderList:{},say:"",Say:"",option_area:[],navData:"订单列表",total:null,pageSize:10,dialogVisible:!1,pageNum:1,executionStatus:[],userId:this.$route.query.userId,userPhone:null==this.$route.query.userPhone?"":this.userPhone,searchTelphone:"",storeScheduleUserName:"",submitting:!1,isHasSource:!1,reminder:this.$route.query.reminder||null,status:this.$route.query.status||null,dataInfo:this.$route.query.dataInfo||null}},computed:{getUserName:function(){return Object(d.a)("userName")}},methods:{goPerson:function(n,e,t){var a=this.$router.resolve({path:"person",query:{userId:n,userName:e,userPhone:t}});window.open(a.href,"_blank")},soushuo:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userPhone;this.getOrders()},reChooseStore:function(){this.$axios.create({}).get(this.$BASE_STORE_URL+"shop/queryShopForAll",{params:{}}).then(function(n){this.stores=n.data.data}.bind(this))},dateChangebirthday:function(n){if(n){var e=this.storeSelected;window.location.href=s.a.order2+"orderExport/listExportOrder?departmentId="+e+"&exportTime="+n}},handleCurrentChange:function(n){this.pageNum=n,this.$router.replace("/order/order_index?pageNum="+n),this.getOrders()},getOrders:function(){var n=this;this.$axios({url:s.a.order+"ordermanage/queryOrderManageForPage",method:"get",params:{pageNum:this.pageNum,pageSize:this.pageSize,departmentId:this.storeSelected,orderUser:this.userId,telephone:this.userPhone,storeScheduleUsername:this.storeScheduleUserName,reminder:this.reminder,status:this.status,dataInfo:this.dataInfo}}).then(function(e){e.data&&e.data.success&&(n.total=e.data.data.total,e.data.data.list.forEach(function(n,e){n.nickName=n.storeScheduleUsername||n.customer&&n.customer.realName||n.customer&&n.customer.nickname;for(var t=0,a=n.listOrderServer.length;t<a;t++)if(n.canCharge=!0,n.listOrderServer[t].listTechnicianManage&&n.listOrderServer[t].listTechnicianManage.length<1||3!==n.listOrderServer[t].executionStatus){n.canCharge=!1;break}}),n.option_area=e.data.data.list)})},revise:function(n){var e=this.$router.resolve({path:"newOrders",query:{orderId:n.id}});window.open(e.href,"_blank")},details:function(n){var e=this.$router.resolve({path:"orderDetail",query:{orderId:n.id}});window.open(e.href,"_blank")},getMoney:function(n){var e=this;console.log("val: ",n),this.$axios({url:s.a.order+"ordermanage/modifyOrderManage",method:"get",params:{id:n.id,status:2,orderUser:n.orderUser}}).then(function(n){e.getOrders()})},getMoneyoffline:function(n){this.orderList=n,this.isHasSource=Boolean(n.customer&&n.customer.customerSource),this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1},sureGiveMoney:function(n){var e=this,t=this.$qs.stringify({multiplePaymentType:r()(n.paymentTypes),id:this.orderList.id,message:n.say,status:3,orderUser:this.orderList.customer&&this.orderList.customer.id||""});this.$axios({url:s.a.order+"ordermanage/modifyOrderStatusFinash",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:t}).then(function(n){n.data&&n.data.success?(e.dialogVisible=!1,e.getOrders()):e.$message({type:"error",message:n.data.message||"收款失败， 请稍后重试"})})},timeStart:function(n){var e=this;this.$axios({url:s.a.order+"orderserve/modifyOrderServe",method:"get",params:{id:n.id,executionStatus:null==n.executionStatus?"1":n.executionStatus}}).then(function(n){1==n.data.success&&e.getOrders()})},timeEnd:function(n){var e=this;this.$axios({url:s.a.order+"orderserve/modifyOrderServe",method:"get",params:{id:n.id,executionStatus:n.executionStatus}}).then(function(n){n.data&&n.data.success&&e.getOrders()})}},created:function(){this.pageNum=parseInt(this.$route.query.pageNum)||1,this.getOrders(),this.reChooseStore()}},u=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"h100 sx orderIndex"},[t("div",{staticClass:"sx-nav"},[t("base-nav",{attrs:{navData:n.navData}})],1),n._v(" "),t("div",{staticClass:"newOrder"},[t("el-date-picker",{staticClass:"mr-10",attrs:{type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择月份并导出对应订单"},on:{change:n.dateChangebirthday},model:{value:n.form.birthdayName,callback:function(e){n.$set(n.form,"birthdayName",e)},expression:"form.birthdayName"}}),n._v(" "),t("el-select",{staticStyle:{"max-width":"100%",float:"left"},attrs:{filterable:"",placeholder:"请选择 店铺"},on:{change:n.reChooseStore},model:{value:n.storeSelected,callback:function(e){n.storeSelected=e},expression:"storeSelected"}},[t("el-option",{attrs:{label:"请选择 店铺",value:""}}),n._v(" "),n._l(n.stores,function(n){return t("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})})],2),n._v(" "),t("div",{staticClass:"check",staticStyle:{"padding-left":"10px"}},[t("el-input",{staticClass:"mr-10",attrs:{type:"text",placeholder:"请输入会员名称"},model:{value:n.storeScheduleUserName,callback:function(e){n.storeScheduleUserName=e},expression:"storeScheduleUserName"}}),n._v(" "),t("el-input",{staticClass:"mr-10",attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:n.userPhone,callback:function(e){n.userPhone=e},expression:"userPhone"}}),n._v(" "),t("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:function(e){n.soushuo()}}},[t("i",{staticClass:"fa fa-search"}),n._v(" 搜索\n      ")])],1)],1),n._v(" "),t("el-row",{staticClass:"title center"},[t("el-col",{staticClass:"flex",attrs:{span:13}},[t("p",{staticStyle:{width:"23%"}},[n._v("服务款式")]),n._v(" "),t("p",{staticStyle:{width:"13%"}},[n._v("单价")]),n._v(" "),t("p",{staticStyle:{width:"30%"}},[n._v("手艺人")]),n._v(" "),t("p",{staticStyle:{width:"20%"}},[n._v("服务时间")])]),n._v(" "),t("el-col",{attrs:{span:3}},[n._v("会员")]),n._v(" "),t("el-col",{attrs:{span:2}},[n._v("合计金额")]),n._v(" "),t("el-col",{attrs:{span:2}},[n._v("状态")]),n._v(" "),t("el-col",{attrs:{span:4}},[n._v("操作")])],1),n._v(" "),n._l(n.option_area,function(e){return t("el-card",{key:e.id,staticClass:"box-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"pr20"},[n._v(n._s(e.createTime))]),n._v(" "),t("span",{staticStyle:{"padding-left":"15px"}},[n._v("开单人： "+n._s(e.userManage&&e.userManage.name))]),n._v(" "),t("span",{staticStyle:{"padding-left":"15px"}},[n._v("所属店铺："+n._s(e.departmentName))])]),n._v(" "),t("el-row",[t("el-col",{staticClass:"serve",style:e.listOrderServer.length<1?"height: 60px":"",attrs:{span:13}},n._l(e.listOrderServer,function(e){return t("div",{key:e.id,staticClass:"serve-item"},[t("div",{staticStyle:{width:"25%"}},[t("p",{staticStyle:{"padding-bottom":"10px"}},[n._v(n._s(e.serve&&e.serve.name||"无服务"))]),n._v(" "),t("p",[n._v(n._s(e.produceName||"无款式"))])]),n._v(" "),t("p",{staticStyle:{width:"15%"}},[n._v("￥"+n._s(e.servePrice))]),n._v(" "),t("div",{staticStyle:{width:"35%"}},[e.listTechnicianManage.length&&e.listTechnicianManage.length>0?t("p",n._l(e.listTechnicianManage,function(e){return t("span",{key:e.id,staticClass:"pr20"},[n._v(n._s(e.name||"无技师"))])})):t("p",{staticClass:"text-pink"},[n._v("未选择")])]),n._v(" "),1==e.executionStatus?t("p",{staticClass:"text-blue",staticStyle:{width:"25%"},on:{click:function(t){n.timeStart(e)}}},[n._v("开始")]):n._e(),n._v(" "),2==e.executionStatus?t("p",{staticClass:"text-blue",staticStyle:{width:"25%"},on:{click:function(t){n.timeEnd(e)}}},[n._v("结束")]):n._e(),n._v(" "),3==e.executionStatus?t("p",{staticStyle:{width:"25%"}},[n._v(n._s(e.startTime)+" - "+n._s(e.endTime))]):n._e()])})),n._v(" "),t("el-col",{staticClass:"text-blue",attrs:{span:3}},[t("div",[t("p",{staticStyle:{"padding-bottom":"10px"}},[n._v(n._s(e.nickName))]),n._v(" "),t("p",[n._v(n._s(e.customer&&e.customer.phone||"无"))])])]),n._v(" "),t("el-col",{attrs:{span:2}},[n._v("￥"+n._s((e.totalPrice-e.discountPrice).toFixed(2)))]),n._v(" "),t("el-col",{attrs:{span:2}},[t("p",[n._v(n._s(n.ORDER_TYPR_STATUS.find(function(n){return n.id===e.status}).name))])]),n._v(" "),t("el-col",{attrs:{span:4}},[t("span",{staticClass:"pointer text-blue",on:{click:function(t){n.details(e)}}},[n._v("详情")]),n._v(" "),3===e.status||4===e.status?t("span",{staticClass:"pointer text-blue",on:{click:function(t){n.details(e)}}},[n._v("数据完整度"+n._s(e.dataIntegrity||0)+"%")]):n._e()])],1)],1)}),n._v(" "),n.dialogVisible?t("charge-money",{attrs:{isHasSource:n.isHasSource,chargeItem:n.orderList},on:{cancel:n.cancel,sureGiveMoney:n.sureGiveMoney}}):n._e(),n._v(" "),t("div",{staticClass:"sx-footer"},[t("div",{staticClass:"Block"},[t("el-pagination",{attrs:{layout:"prev, pager, next",total:this.total,"page-size":this.pageSize,"current-page":n.pageNum},on:{"current-change":n.handleCurrentChange,"update:currentPage":function(e){n.pageNum=e}}})],1)])],2)};u._withStripped=!0;var A={render:u,staticRenderFns:[]},p=A;var h=!1;var m=t("VU/8")(c,p,!1,function(n){h||t("efeu")},"data-v-6399ac5a",null);m.options.__file="src\\components\\order\\order_index.vue";e.default=m.exports},efeu:function(n,e,t){var a=t("xeHG");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("9fc767a0",a,!1,{})},xeHG:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.check[data-v-6399ac5a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flex[data-v-6399ac5a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.center[data-v-6399ac5a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.orderIndex .newOrder[data-v-6399ac5a] {\n  margin-bottom: 20px;\n}\n.orderIndex .newOrder .mr-10[data-v-6399ac5a] {\n    float: left;\n    margin-right: 10px;\n    width: 25%;\n}\n.orderIndex .newOrder span[data-v-6399ac5a] {\n    padding: 8px 0px 10px 3px;\n    background: #4d82b0;\n}\n.orderIndex .newOrder span a[data-v-6399ac5a] {\n      color: #fff;\n}\n.title[data-v-6399ac5a] {\n  margin-bottom: 20px;\n  margin-top: 30px;\n  border: 1px solid #eee;\n  padding: 15px 20px;\n  background-color: #f8f8f8;\n  border-radius: 6px;\n}\n.box-card[data-v-6399ac5a] {\n  margin-bottom: 20px;\n}\n.center[data-v-6399ac5a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.serve[data-v-6399ac5a] {\n  margin: -20px 0;\n}\n.serve-item[data-v-6399ac5a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 90%;\n  border-right: 1px solid #ebeef5;\n  border-top: 1px solid #ebeef5;\n  padding: 20px 0;\n}\n.serve-item[data-v-6399ac5a]:nth-of-type(1) {\n  border-top: none;\n}\n.technicianManage[data-v-6399ac5a] {\n  width: 100px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.sx-footer[data-v-6399ac5a] {\n  padding: 0px;\n  background: #fff;\n  text-align: center;\n}\n","",{version:3,sources:["E:/vueWorkspace/gogirl-web/src/components/order/E:/vueWorkspace/gogirl-web/src/components/order/order_index.vue"],names:[],mappings:";AAgaA;EACE,qBAAa;EAAb,qBAAa;EAAb,cAAa;CACd;AACD;EACE,qBAAa;EAAb,qBAAa;EAAb,cAAa;EACb,0BAAmB;MAAnB,uBAAmB;UAAnB,oBAAmB;CACpB;AACD;EACE,qBAAa;EAAb,qBAAa;EAAb,cAAa;EACb,0BAAmB;MAAnB,uBAAmB;UAAnB,oBAAmB;EACnB,yBAAuB;MAAvB,sBAAuB;UAAvB,wBAAuB;CACxB;AACD;EAEI,oBAAmB;CAapB;AAfH;IAIM,YAAW;IACX,mBAAkB;IAClB,WAAU;CACX;AAPL;IASM,0BAAyB;IACzB,oBAAmB;CAIpB;AAdL;MAYQ,YAAW;CACZ;AAIP;EACE,oBAAmB;EACnB,iBAAgB;EAChB,uBAAsB;EACtB,mBAAkB;EAClB,0BAAyB;EACzB,mBAAkB;CACnB;AACD;EACE,oBAAmB;CACpB;AACD;EACE,qBAAa;EAAb,qBAAa;EAAb,cAAa;EACb,0BAA8B;MAA9B,uBAA8B;UAA9B,+BAA8B;EAC9B,0BAAmB;MAAnB,uBAAmB;UAAnB,oBAAmB;CACpB;AACD;EACE,gBAAe;CAChB;AACD;EACE,qBAAa;EAAb,qBAAa;EAAb,cAAa;EACb,WAAU;EACV,gCAA+B;EAC/B,8BAA6B;EAC7B,gBAAe;CAChB;AACD;EACE,iBAAgB;CACjB;AACD;EACE,aAAY;EACZ,oBAAmB;EACnB,wBAAuB;CACxB;AACD;EACE,aAAY;EACZ,iBAAgB;EAChB,mBAAkB;CAEnB",file:"order_index.vue",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import "src/style/mixin";\r\n.check {\r\n  display: flex;\r\n}\r\n.flex {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.center {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.orderIndex {\r\n  .newOrder {\r\n    margin-bottom: 20px;\r\n    .mr-10 {\r\n      float: left;\r\n      margin-right: 10px;\r\n      width: 25%;\r\n    }\r\n    span {\r\n      padding: 8px 0px 10px 3px;\r\n      background: #4d82b0;\r\n      a {\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n.title {\r\n  margin-bottom: 20px;\r\n  margin-top: 30px;\r\n  border: 1px solid #eee;\r\n  padding: 15px 20px;\r\n  background-color: #f8f8f8;\r\n  border-radius: 6px;\r\n}\r\n.box-card {\r\n  margin-bottom: 20px;\r\n}\r\n.center {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.serve {\r\n  margin: -20px 0;\r\n}\r\n.serve-item {\r\n  display: flex;\r\n  width: 90%;\r\n  border-right: 1px solid #ebeef5;\r\n  border-top: 1px solid #ebeef5;\r\n  padding: 20px 0;\r\n}\r\n.serve-item:nth-of-type(1) {\r\n  border-top: none;\r\n}\r\n.technicianManage {\r\n  width: 100px;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n.sx-footer {\r\n  padding: 0px;\r\n  background: #fff;\r\n  text-align: center;\r\n\r\n}\r\n'],sourceRoot:""}])}});
//# sourceMappingURL=37.4ae110407cf2d679df85.1565145539402.js.map