webpackJsonp([56],{"2el5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"card_rule_modify",props:["attr"],data:function(){var e=function(e,t,r){t!=parseFloat(t)?r(new Error("只能是数字")):t<0?r(new Error("不能为负数")):r()};return{cardrule:{chargeAmount:"",bestowAmount:"",discount:"",level:"",remark:""},rules:{chargeAmount:[{validator:e,trigger:"blur"}],bestowAmount:[{validator:e,trigger:"blur"}],discount:[{validator:function(e,t,r){t!=parseFloat(t)?r(new Error("只能是数字")):t<=0||t>1?r(new Error("输入大于0小于等于1")):r()},trigger:"blur"}],level:[{required:!0,message:"请输入会员等级",trigger:"blur"}]},hadSave:!1}},mounted:function(){this.getUserDetail()},methods:{modify:function(){var e=this;this.$refs.cardrule.validate(function(t){if(!t)return!1;e.hadSave=!0;var r=e.$BASE_USER_URL+"updateByPrimaryKeySelective",a=e.$axios.create({}),l=e.$qs.stringify({id:e.attr,chargeAmount:100*e.cardrule.chargeAmount,bestowAmount:100*e.cardrule.bestowAmount,discount:e.cardrule.discount,level:e.cardrule.level,remark:e.cardrule.remark});a.post(r,l).then(function(e){this.$layer.msg(e.data.message),1==e.data.success&&(this.hadSave=!0),this.$emit("updateClick")}.bind(e))})},getUserDetail:function(){this.$axios.create({}).get(this.$BASE_USER_URL+"selectByPrimaryKey",{params:{id:this.attr}}).then(function(e){this.cardrule=e.data.data.discountConfig,this.cardrule.chargeAmount=this.cardrule.chargeAmount/100,this.cardrule.bestowAmount=this.cardrule.bestowAmount/100}.bind(this))}}},l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("el-form",{ref:"cardrule",attrs:{model:e.cardrule,rules:e.rules,"label-width":"100px"}},[r("div",{staticStyle:{"margin-bottom":"5px"}},[r("div",{staticClass:"fixed-table-container bootstrap-table"},[r("h3",{staticStyle:{"margin-top":"20px"}},[e._v("修改金额配置")]),e._v(" "),r("table",{staticClass:"table table-hover"},[r("tbody",[r("tr",[r("td",[r("el-form-item",{attrs:{label:"充值金额(元):",prop:"chargeAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 充值金额",required:""},model:{value:e.cardrule.chargeAmount,callback:function(t){e.$set(e.cardrule,"chargeAmount",t)},expression:"cardrule.chargeAmount"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"赠送金额:",prop:"bestowAmount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 赠送金额",required:""},model:{value:e.cardrule.bestowAmount,callback:function(t){e.$set(e.cardrule,"bestowAmount",t)},expression:"cardrule.bestowAmount"}})],1)])],1)]),e._v(" "),r("tr",[r("td",[r("el-form-item",{attrs:{label:"折扣:",prop:"discount"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 折扣",required:""},model:{value:e.cardrule.discount,callback:function(t){e.$set(e.cardrule,"discount",t)},expression:"cardrule.discount"}})],1)])],1),e._v(" "),r("td",[r("el-form-item",{attrs:{label:"会员等级:",prop:"level"}},[r("span",[r("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 会员等级",required:""},model:{value:e.cardrule.level,callback:function(t){e.$set(e.cardrule,"level",t)},expression:"cardrule.level"}})],1)])],1)]),e._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[r("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[r("span",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cardrule.remark,expression:"cardrule.remark"}],staticClass:"form-control",staticStyle:{"max-width":"100%"},attrs:{id:"remark"},domProps:{value:e.cardrule.remark},on:{input:function(t){t.target.composing||e.$set(e.cardrule,"remark",t.target.value)}}})])])],1),e._v(" "),r("td"),r("td")]),e._v(" "),r("tr",[r("td"),r("td"),r("td"),r("td")])])])])])])],1),e._v(" "),r("div",{staticStyle:{margin:"10px auto"}},[r("div",{staticStyle:{margin:"0 auto",width:"20%"}},[r("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.modify}},[e._v("修改")])],1)])])};l._withStripped=!0;var i={render:l,staticRenderFns:[]},o=i;var s=r("VU/8")(a,o,!1,null,null,null);s.options.__file="src\\components\\member\\card_rule_modify.vue";t.default=s.exports}});
//# sourceMappingURL=56.45bc37ed148c1f4983d2.1565145539402.js.map