webpackJsonp([48],{BTac:function(e,n,t){var s=t("VGaz");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("rjj0")("e95ede9a",s,!1,{})},VGaz:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"user_new.vue",sourceRoot:""}])},fVQM:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s={name:"user_new",data:function(){return{stores:[],user:{name:"",password:"",telphone:"",sex:"",selectCmsRole:"",selectStoreRole:"",grade:"",selectStore:"",integral:0},cmsType:!0,storeType:!1,rules:{name:[{required:!0,message:"请输入帐号名称",trigger:"blur"}],password:[{required:!0,message:"请输入帐号密码",trigger:"blur"}],selectStore:[{required:!0,message:"请选择所属店铺",trigger:"blur"}],selectCmsRole:[{required:!0,message:"请选择用户角色",trigger:"blur"}],selectStoreRole:[{required:!0,message:"请选择用户角色",trigger:"blur"}]},hadSave:!1,passwordType:"password"}},mounted:function(){this.reChooseStore()},methods:{save:function(){var e=this;this.user.sex;this.$refs.user.validate(function(n){if(!n)return!1;e.hadSave=!0;var t=e.$BASE_URL+"user/addUser/",s=e.$axios.create({}),r=e.$qs.stringify({name:e.user.name,departmentId:e.user.selectStore,password:e.user.password,telphone:e.user.telphone,userRole:e.user.selectCmsRole||e.user.selectStoreRole,sex:e.user.sex});s.post(t,r).then(function(e){this.$layer.msg(e.data.message),1==e.data.success&&(this.hadSave=!0,layer.close(layer.index)),this.$emit("childClick")}.bind(e))})},reChooseStore:function(){this.$axios.create({}).get(this.$BASE_STORE_URL+"shop/queryShopForAll",{params:{}}).then(function(e){this.stores=e.data.data}.bind(this)),0==this.user.selectStore?(this.cmsType=!0,this.storeType=!1,this.user.selectCmsRole="",this.user.selectStoreRole=""):(this.cmsType=!1,this.storeType=!0,this.user.selectCmsRole="",this.user.selectStoreRole="")}}},r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",[t("el-form",{ref:"user",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[t("div",{staticStyle:{"margin-bottom":"5px"}},[t("div",{staticClass:"fixed-table-container bootstrap-table"},[t("h3",{staticStyle:{"margin-top":"20px"}},[e._v("新增帐号")]),e._v(" "),t("table",{staticClass:"table table-hover"},[t("tbody",[t("tr",[t("td",[t("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[t("span",[t("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 姓名",required:""},model:{value:e.user.name,callback:function(n){e.$set(e.user,"name",n)},expression:"user.name"}})],1)])],1),e._v(" "),t("td",[t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("span",[t("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 密码",type:e.passwordType,required:""},model:{value:e.user.password,callback:function(n){e.$set(e.user,"password",n)},expression:"user.password"}})],1)])],1)]),e._v(" "),t("tr",[t("td",[t("el-form-item",{attrs:{label:"所属店铺:",prop:"selectStore"}},[t("span",[t("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 所属店铺"},on:{change:e.reChooseStore},model:{value:e.user.selectStore,callback:function(n){e.$set(e.user,"selectStore",n)},expression:"user.selectStore"}},[t("el-option",{attrs:{label:"总后台",value:"0"}}),e._v(" "),e._l(e.stores,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1)])],1),e._v(" "),t("td",[e.cmsType?t("el-form-item",{attrs:{label:"用户角色:",prop:"selectCmsRole"}},[t("span",[t("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 用户角色"},model:{value:e.user.selectCmsRole,callback:function(n){e.$set(e.user,"selectCmsRole",n)},expression:"user.selectCmsRole"}},[t("el-option",{attrs:{label:"运营",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"客服",value:"2"}}),e._v(" "),t("el-option",{attrs:{label:"采购",value:"3"}}),e._v(" "),t("el-option",{attrs:{label:"官网",value:"6"}})],1)],1)]):e._e(),e._v(" "),e.storeType?t("el-form-item",{attrs:{label:"用户角色:",prop:"selectStoreRole"}},[t("span",[t("el-select",{staticStyle:{"max-width":"100%"},attrs:{filterable:"",placeholder:"请选择 用户角色"},model:{value:e.user.selectStoreRole,callback:function(n){e.$set(e.user,"selectStoreRole",n)},expression:"user.selectStoreRole"}},[t("el-option",{attrs:{label:"老板",value:"4"}}),e._v(" "),t("el-option",{attrs:{label:"员工",value:"5"}})],1)],1)]):e._e()],1)]),e._v(" "),t("tr",[t("td",[t("el-form-item",{attrs:{label:"电话:",prop:"telphone"}},[t("span",[t("el-input",{staticStyle:{"max-width":"100%"},attrs:{placeholder:"请输入 电话",required:""},model:{value:e.user.telphone,callback:function(n){e.$set(e.user,"telphone",n)},expression:"user.telphone"}})],1)])],1),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td"),t("td"),t("td"),t("td")])])])])])])],1),e._v(" "),t("div",{staticStyle:{margin:"10px auto"}},[t("div",{staticStyle:{margin:"0 auto",width:"20%"}},[t("el-button",{attrs:{type:"primary",plain:"",disabled:e.hadSave},on:{click:e.save}},[e._v("保存")])],1)])])};r._withStripped=!0;var l={render:r,staticRenderFns:[]},a=l;var o=!1;var i=t("VU/8")(s,a,!1,function(e){o||t("BTac")},"data-v-40b54bdd",null);i.options.__file="src\\components\\user\\user_new.vue";n.default=i.exports}});
//# sourceMappingURL=48.71baca8bb9cb53309d5d.1565145539402.js.map